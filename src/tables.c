#include "tables.h"

/*
 * Material values indexed by piece type
 * Index: 0=empty, 1=pawn, 2=knight, 3=bishop, 4=rook, 5=queen, 6=king
 */
const s16 material_value[7] = {
    0, 100, 320, 330, 500, 900, 20000
};

/*
 * Piece-Square Tables
 * From chessprogramming.org Simplified Evaluation Function
 * Layout: a1=index 0, h1=index 7, a2=index 8, ..., h8=index 63
 * Values from White's perspective.
 */

const s8 pst_pawn[64] = {
     0,  0,  0,  0,  0,  0,  0,  0,   /* rank 1 (pawns never here) */
     5, 10, 10,-20,-20, 10, 10,  5,   /* rank 2 */
     5, -5,-10,  0,  0,-10, -5,  5,   /* rank 3 */
     0,  0,  0, 20, 20,  0,  0,  0,   /* rank 4 */
     5,  5, 10, 25, 25, 10,  5,  5,   /* rank 5 */
    10, 10, 20, 30, 30, 20, 10, 10,   /* rank 6 */
    50, 50, 50, 50, 50, 50, 50, 50,   /* rank 7 */
     0,  0,  0,  0,  0,  0,  0,  0    /* rank 8 (pawns never here) */
};

const s8 pst_knight[64] = {
    -50,-40,-30,-30,-30,-30,-40,-50,
    -40,-20,  0,  5,  5,  0,-20,-40,
    -30,  0, 10, 15, 15, 10,  0,-30,
    -30,  5, 15, 20, 20, 15,  5,-30,
    -30,  0, 15, 20, 20, 15,  0,-30,
    -30,  5, 10, 15, 15, 10,  5,-30,
    -40,-20,  0,  0,  0,  0,-20,-40,
    -50,-40,-30,-30,-30,-30,-40,-50
};

const s8 pst_bishop[64] = {
    -20,-10,-10,-10,-10,-10,-10,-20,
    -10,  5,  0,  0,  0,  0,  5,-10,
    -10, 10, 10, 10, 10, 10, 10,-10,
    -10,  0, 10, 10, 10, 10,  0,-10,
    -10,  5,  5, 10, 10,  5,  5,-10,
    -10,  0,  5, 10, 10,  5,  0,-10,
    -10,  0,  0,  0,  0,  0,  0,-10,
    -20,-10,-10,-10,-10,-10,-10,-20
};

const s8 pst_rook[64] = {
      0,  0,  0,  5,  5,  0,  0,  0,
     -5,  0,  0,  0,  0,  0,  0, -5,
     -5,  0,  0,  0,  0,  0,  0, -5,
     -5,  0,  0,  0,  0,  0,  0, -5,
     -5,  0,  0,  0,  0,  0,  0, -5,
     -5,  0,  0,  0,  0,  0,  0, -5,
      5, 10, 10, 10, 10, 10, 10,  5,
      0,  0,  0,  0,  0,  0,  0,  0
};

const s8 pst_queen[64] = {
    -20,-10,-10, -5, -5,-10,-10,-20,
    -10,  0,  5,  0,  0,  0,  0,-10,
    -10,  5,  5,  5,  5,  5,  0,-10,
      0,  0,  5,  5,  5,  5,  0, -5,
     -5,  0,  5,  5,  5,  5,  0, -5,
    -10,  0,  5,  5,  5,  5,  0,-10,
    -10,  0,  0,  0,  0,  0,  0,-10,
    -20,-10,-10, -5, -5,-10,-10,-20
};

const s8 pst_king_mg[64] = {
     20, 30, 10,  0,  0, 10, 30, 20,
     20, 20,  0,  0,  0,  0, 20, 20,
    -10,-20,-20,-20,-20,-20,-20,-10,
    -20,-30,-30,-40,-40,-30,-30,-20,
    -30,-40,-40,-50,-50,-40,-40,-30,
    -30,-40,-40,-50,-50,-40,-40,-30,
    -30,-40,-40,-50,-50,-40,-40,-30,
    -30,-40,-40,-50,-50,-40,-40,-30
};

const s8 pst_king_eg[64] = {
    -50,-30,-30,-30,-30,-30,-30,-50,
    -30,-30,  0,  0,  0,  0,-30,-30,
    -30,-10, 20, 30, 30, 20,-10,-30,
    -30,-10, 30, 40, 40, 30,-10,-30,
    -30,-10, 30, 40, 40, 30,-10,-30,
    -30,-10, 20, 30, 30, 20,-10,-30,
    -30,-20,-10,  0,  0,-10,-20,-30,
    -50,-40,-30,-20,-20,-30,-40,-50
};

/* PST pointer table indexed by piece type */
const s8 *pst_table[7] = {
    (const s8 *)0,   /* 0 = EMPTY */
    pst_pawn,        /* 1 = PAWN */
    pst_knight,      /* 2 = KNIGHT */
    pst_bishop,      /* 3 = BISHOP */
    pst_rook,        /* 4 = ROOK */
    pst_queen,       /* 5 = QUEEN */
    pst_king_mg      /* 6 = KING (middlegame by default) */
};

/*
 * Zobrist random numbers
 * C64: 16-bit values (fast on 6502, sufficient for 4KB TT)
 * PC: 32-bit values (far fewer hash collisions for larger TT)
 */

#ifdef TARGET_C64

const u16 zobrist_pieces[2][7][128] = {
/* WHITE pieces */
{
 /* EMPTY - unused but keeps indexing simple */
 {0},
 /* PAWN */
 {0x9E37,0xA1C2,0x5D89,0x3F14,0xB6E0,0x72AB,0xD456,0x8F01, /* rank 1 file a-h */
  0x4BCC,0x0E97,0xC062,0x832D,0x45F8,0x17C3,0xDA8E,0x9C59, /* off-board */
  0x5E24,0x20EF,0xE3BA,0xA585,0x6750,0x291B,0xEBE6,0xADB1, /* rank 2 */
  0x6F7C,0x3147,0xF312,0xB4DD,0x76A8,0x3873,0xFA3E,0xBC09, /* off-board */
  0x7DD4,0x3F9F,0x016A,0xC335,0x8500,0x46CB,0x0896,0xCA61, /* rank 3 */
  0x8C2C,0x4DF7,0x0FC2,0xD18D,0x9358,0x5523,0x16EE,0xD8B9, /* off-board */
  0x9A84,0x5C4F,0x1E1A,0xDFE5,0xA1B0,0x637B,0x2546,0xE711, /* rank 4 */
  0xA8DC,0x6AA7,0x2C72,0xEE3D,0xB008,0x71D3,0x339E,0xF569, /* off-board */
  0xB734,0x78FF,0x3ACA,0xFC95,0xBE60,0x802B,0x41F6,0x03C1, /* rank 5 */
  0xC58C,0x8757,0x4922,0x0AED,0xCCB8,0x8E83,0x504E,0x1219, /* off-board */
  0xD3E4,0x95AF,0x577A,0x1945,0xDB10,0x9CDB,0x5EA6,0x2071, /* rank 6 */
  0xE23C,0xA407,0x65D2,0x279D,0xE968,0xAB33,0x6CFE,0x2EC9, /* off-board */
  0xF094,0xB25F,0x742A,0x35F5,0xF7C0,0xB98B,0x7B56,0x3D21, /* rank 7 */
  0xFEEC,0xC0B7,0x8282,0x444D,0x0618,0xC7E3,0x89AE,0x4B79, /* off-board */
  },
 /* KNIGHT */
 {0x0D44,0xCF0F,0x90DA,0x52A5,0x1470,0xD63B,0x9806,0x59D1,
  0x1B9C,0xDD67,0x9F32,0x60FD,0x22C8,0xE493,0xA65E,0x6829,
  0x29F4,0xEBBF,0xAD8A,0x6F55,0x3120,0xF2EB,0xB4B6,0x7681,
  0x384C,0xFA17,0xBBE2,0x7DAD,0x3F78,0x0143,0xC30E,0x84D9,
  0x46A4,0x086F,0xCA3A,0x8C05,0x4DD0,0x0F9B,0xD166,0x9331,
  0x54FC,0x16C7,0xD892,0x9A5D,0x5C28,0x1DF3,0xDFBE,0xA189,
  0x6354,0x251F,0xE6EA,0xA8B5,0x6A80,0x2C4B,0xEE16,0xAFE1,
  0x71AC,0x3377,0xF542,0xB70D,0x78D8,0x3AA3,0xFC6E,0xBE39,
  0x8004,0x41CF,0x039A,0xC565,0x8730,0x48FB,0x0AC6,0xCC91,
  0x8E5C,0x5027,0x11F2,0xD3BD,0x9588,0x5753,0x191E,0xDAE9,
  0x9CB4,0x5E7F,0x204A,0xE215,0xA3E0,0x65AB,0x2776,0xE941,
  0xAB0C,0x6CD7,0x2EA2,0xF06D,0xB238,0x7403,0x35CE,0xF799,
  0xB964,0x7B2F,0x3CFA,0xFEC5,0xC090,0x825B,0x4426,0x05F1,
  0xC7BC,0x8987,0x4B52,0x0D1D,0xCEE8,0x90B3,0x527E,0x1449,
  0xD614,0x97DF,0x59AA,0x1B75,0xDD40,0x9F0B,0x60D6,0x22A1,
  0xE46C,0xA637,0x6802,0x29CD,0xEB98,0xAD63,0x6F2E,0x30F9},
 /* BISHOP */
 {0x3274,0xF43F,0xB60A,0x77D5,0x39A0,0xFB6B,0xBD36,0x7F01,
  0x40CC,0x0297,0xC462,0x862D,0x47F8,0x09C3,0xCB8E,0x8D59,
  0x4F24,0x10EF,0xD2BA,0x9485,0x5650,0x181B,0xD9E6,0x9BB1,
  0x5D7C,0x1F47,0xE112,0xA2DD,0x64A8,0x2673,0xE83E,0xAA09,
  0x6BD4,0x2D9F,0xEF6A,0xB135,0x7300,0x34CB,0xF696,0xB861,
  0x7A2C,0x3BF7,0xFDC2,0xBF8D,0x8158,0x4323,0x04EE,0xC6B9,
  0x8884,0x4A4F,0x0C1A,0xCDE5,0x8FB0,0x517B,0x1346,0xD511,
  0x96DC,0x58A7,0x1A72,0xDC3D,0x9E08,0x5FD3,0x219E,0xE369,
  0xA534,0x66FF,0x28CA,0xEA95,0xAC60,0x6E2B,0x2FF6,0xF1C1,
  0xB38C,0x7557,0x3722,0xF8ED,0xBAB8,0x7C83,0x3E4E,0x0019,
  0xC1E4,0x83AF,0x457A,0x0745,0xC910,0x8ADB,0x4CA6,0x0E71,
  0xD03C,0x9207,0x53D2,0x159D,0xD768,0x9933,0x5AFE,0x1CC9,
  0xDE94,0xA05F,0x622A,0x23F5,0xE5C0,0xA78B,0x6956,0x2B21,
  0xECEC,0xAEB7,0x7082,0x324D,0xF418,0xB5E3,0x77AE,0x3979,
  0xFB44,0xBD0F,0x7EDA,0x40A5,0x0270,0xC43B,0x8606,0x47D1,
  0x099C,0xCB67,0x8D32,0x4EFD,0x10C8,0xD293,0x945E,0x5629},
 /* ROOK */
 {0x57F4,0x19BF,0xDB8A,0x9D55,0x5F20,0x20EB,0xE2B6,0xA481,
  0x664C,0x2817,0xE9E2,0xABAD,0x6D78,0x2F43,0xF10E,0xB2D9,
  0x74A4,0x366F,0xF83A,0xBA05,0x7BD0,0x3D9B,0xFF66,0xC131,
  0x82FC,0x44C7,0x0692,0xC85D,0x8A28,0x4BF3,0x0DBE,0xCF89,
  0x9154,0x531F,0x14EA,0xD6B5,0x9880,0x5A4B,0x1C16,0xDDE1,
  0x9FAC,0x6177,0x2342,0xE50D,0xA6D8,0x68A3,0x2A6E,0xEC39,
  0xAE04,0x6FCF,0x319A,0xF365,0xB530,0x76FB,0x38C6,0xFA91,
  0xBC5C,0x7E27,0x3FF2,0x01BD,0xC388,0x8553,0x471E,0x08E9,
  0xCAB4,0x8C7F,0x4E4A,0x1015,0xD1E0,0x93AB,0x5576,0x1741,
  0xD90C,0x9AD7,0x5CA2,0x1E6D,0xE038,0xA203,0x63CE,0x2599,
  0xE764,0xA92F,0x6AFA,0x2CC5,0xEE90,0xB05B,0x7226,0x33F1,
  0xF5BC,0xB787,0x7952,0x3B1D,0xFCE8,0xBEB3,0x807E,0x4249,
  0x0414,0xC5DF,0x87AA,0x4975,0x0B40,0xCD0B,0x8ED6,0x50A1,
  0x126C,0xD437,0x9602,0x57CD,0x1998,0xDB63,0x9D2E,0x5EF9,
  0x20C4,0xE28F,0xA45A,0x6625,0x27F0,0xE9BB,0xAB86,0x6D51,
  0x2F1C,0xF0E7,0xB2B2,0x747D,0x3648,0xF813,0xB9DE,0x7BA9},
 /* QUEEN */
 {0x7D34,0x3EFF,0x00CA,0xC295,0x8460,0x462B,0x07F6,0xC9C1,
  0x8B8C,0x4D57,0x0F22,0xD0ED,0x92B8,0x5483,0x164E,0xD819,
  0x99E4,0x5BAF,0x1D7A,0xDF45,0xA110,0x62DB,0x24A6,0xE671,
  0xA83C,0x6A07,0x2BD2,0xED9D,0xAF68,0x7133,0x32FE,0xF4C9,
  0xB694,0x785F,0x3A2A,0xFBF5,0xBDC0,0x7F8B,0x4156,0x0321,
  0xC4EC,0x86B7,0x4882,0x0A4D,0xCC18,0x8DE3,0x4FAE,0x1179,
  0xD344,0x950F,0x56DA,0x18A5,0xDA70,0x9C3B,0x5E06,0x1FD1,
  0xE19C,0xA367,0x6532,0x26FD,0xE8C8,0xAA93,0x6C5E,0x2E29,
  0xEFF4,0xB1BF,0x738A,0x3555,0xF720,0xB8EB,0x7AB6,0x3C81,
  0xFE4C,0xC017,0x81E2,0x43AD,0x0578,0xC743,0x890E,0x4AD9,
  0x0CA4,0xCE6F,0x903A,0x5205,0x13D0,0xD59B,0x9766,0x5931,
  0x1AFC,0xDCC7,0x9E92,0x605D,0x2228,0xE3F3,0xA5BE,0x6789,
  0x2954,0xEB1F,0xACEA,0x6EB5,0x3080,0xF24B,0xB416,0x75E1,
  0x37AC,0xF977,0xBB42,0x7D0D,0x3ED8,0x00A3,0xC26E,0x8439,
  0x4604,0x07CF,0xC99A,0x8B65,0x4D30,0x0EFB,0xD0C6,0x9291,
  0x545C,0x1627,0xD7F2,0x99BD,0x5B88,0x1D53,0xDF1E,0xA0E9},
 /* KING */
 {0xA2B4,0x647F,0x264A,0xE815,0xA9E0,0x6BAB,0x2D76,0xEF41,
  0xB10C,0x72D7,0x34A2,0xF66D,0xB838,0x7A03,0x3BCE,0xFD99,
  0xBF64,0x812F,0x42FA,0x04C5,0xC690,0x885B,0x4A26,0x0BF1,
  0xCDBC,0x8F87,0x5152,0x131D,0xD4E8,0x96B3,0x587E,0x1A49,
  0xDC14,0x9DDF,0x5FAA,0x2175,0xE340,0xA50B,0x66D6,0x28A1,
  0xEA6C,0xAC37,0x6E02,0x2FCD,0xF198,0xB363,0x752E,0x36F9,
  0xF8C4,0xBA8F,0x7C5A,0x3E25,0xFFF0,0xC1BB,0x8386,0x4551,
  0x071C,0xC8E7,0x8AB2,0x4C7D,0x0E48,0xD013,0x91DE,0x53A9,
  0x1574,0xD73F,0x990A,0x5AD5,0x1CA0,0xDE6B,0xA036,0x6201,
  0x23CC,0xE597,0xA762,0x692D,0x2AF8,0xECC3,0xAE8E,0x7059,
  0x3224,0xF3EF,0xB5BA,0x7785,0x3950,0xFB1B,0xBCE6,0x7EB1,
  0x407C,0x0247,0xC412,0x85DD,0x47A8,0x0973,0xCB3E,0x8D09,
  0x4ED4,0x109F,0xD26A,0x9435,0x5600,0x17CB,0xD996,0x9B61,
  0x5D2C,0x1EF7,0xE0C2,0xA28D,0x6458,0x2623,0xE7EE,0xA9B9,
  0x6B84,0x2D4F,0xEF1A,0xB0E5,0x72B0,0x347B,0xF646,0xB811,
  0x79DC,0x3BA7,0xFD72,0xBF3D,0x8108,0x42D3,0x049E,0xC669}
},
/* BLACK pieces */
{
 /* EMPTY */
 {0},
 /* PAWN */
 {0xC844,0x8A0F,0x4BDA,0x0DA5,0xCF70,0x913B,0x5306,0x14D1,
  0xD69C,0x9867,0x5A32,0x1BFD,0xDDC8,0x9F93,0x615E,0x2329,
  0xE4F4,0xA6BF,0x688A,0x2A55,0xEC20,0xADEB,0x6FB6,0x3181,
  0xF34C,0xB517,0x76E2,0x38AD,0xFA78,0xBC43,0x7E0E,0x3FD9,
  0x01A4,0xC36F,0x853A,0x4705,0x08D0,0xCA9B,0x8C66,0x4E31,
  0x0FFC,0xD1C7,0x9392,0x555D,0x1728,0xD8F3,0x9ABE,0x5C89,
  0x1E54,0xE01F,0xA1EA,0x63B5,0x2580,0xE74B,0xA916,0x6AE1,
  0x2CAC,0xEE77,0xB042,0x720D,0x33D8,0xF5A3,0xB76E,0x7939,
  0x3B04,0xFCCF,0xBE9A,0x8065,0x4230,0x03FB,0xC5C6,0x8791,
  0x495C,0x0B27,0xCCF2,0x8EBD,0x5088,0x1253,0xD41E,0x95E9,
  0x57B4,0x197F,0xDB4A,0x9D15,0x5EE0,0x20AB,0xE276,0xA441,
  0x660C,0x27D7,0xE9A2,0xAB6D,0x6D38,0x2F03,0xF0CE,0xB299,
  0x7464,0x362F,0xF7FA,0xB9C5,0x7B90,0x3D5B,0xFF26,0xC0F1,
  0x82BC,0x4487,0x0652,0xC81D,0x89E8,0x4BB3,0x0D7E,0xCF49,
  0x9114,0x52DF,0x14AA,0xD675,0x9840,0x5A0B,0x1BD6,0xDDA1,
  0x9F6C,0x6137,0x2302,0xE4CD,0xA698,0x6863,0x2A2E,0xEBF9},
 /* KNIGHT */
 {0xAD84,0x6F4F,0x311A,0xF2E5,0xB4B0,0x767B,0x3846,0xFA11,
  0xBBDC,0x7DA7,0x3F72,0x013D,0xC308,0x84D3,0x469E,0x0869,
  0xCA34,0x8BFF,0x4DCA,0x0F95,0xD160,0x932B,0x54F6,0x16C1,
  0xD88C,0x9A57,0x5C22,0x1DED,0xDFB8,0xA183,0x634E,0x2519,
  0xE6E4,0xA8AF,0x6A7A,0x2C45,0xEE10,0xAFDB,0x71A6,0x3371,
  0xF53C,0xB707,0x78D2,0x3A9D,0xFC68,0xBE33,0x7FFE,0x41C9,
  0x0394,0xC55F,0x872A,0x48F5,0x0AC0,0xCC8B,0x8E56,0x5021,
  0x11EC,0xD3B7,0x9582,0x574D,0x1918,0xDAE3,0x9CAE,0x5E79,
  0x2044,0xE20F,0xA3DA,0x65A5,0x2770,0xE93B,0xAB06,0x6CD1,
  0x2E9C,0xF067,0xB232,0x73FD,0x35C8,0xF793,0xB95E,0x7B29,
  0x3CF4,0xFEBF,0xC08A,0x8255,0x4420,0x05EB,0xC7B6,0x8981,
  0x4B4C,0x0D17,0xCEE2,0x90AD,0x5278,0x1443,0xD60E,0x97D9,
  0x59A4,0x1B6F,0xDD3A,0x9F05,0x60D0,0x229B,0xE466,0xA631,
  0x67FC,0x29C7,0xEB92,0xAD5D,0x6F28,0x30F3,0xF2BE,0xB489,
  0x7654,0x381F,0xF9EA,0xBBB5,0x7D80,0x3F4B,0x0116,0xC2E1,
  0x84AC,0x4677,0x0842,0xCA0D,0x8BD8,0x4DA3,0x0F6E,0xD139},
 /* BISHOP */
 {0xD304,0x94CF,0x569A,0x1865,0xDA30,0x9BFB,0x5DC6,0x1F91,
  0xE15C,0xA327,0x64F2,0x26BD,0xE888,0xAA53,0x6C1E,0x2DE9,
  0xEFB4,0xB17F,0x734A,0x3515,0xF6E0,0xB8AB,0x7A76,0x3C41,
  0xFE0C,0xBFD7,0x81A2,0x436D,0x0538,0xC703,0x88CE,0x4A99,
  0x0C64,0xCE2F,0x8FFA,0x51C5,0x1390,0xD55B,0x9726,0x58F1,
  0x1ABC,0xDC87,0x9E52,0x601D,0x21E8,0xE3B3,0xA57E,0x6749,
  0x2914,0xEADF,0xACAA,0x6E75,0x3040,0xF20B,0xB3D6,0x75A1,
  0x376C,0xF937,0xBB02,0x7CCD,0x3E98,0x0063,0xC22E,0x83F9,
  0x45C4,0x078F,0xC95A,0x8B25,0x4CF0,0x0EBB,0xD086,0x9251,
  0x541C,0x15E7,0xD7B2,0x997D,0x5B48,0x1D13,0xDEDE,0xA0A9,
  0x6274,0x243F,0xE60A,0xA7D5,0x69A0,0x2B6B,0xED36,0xAF01,
  0x70CC,0x3297,0xF462,0xB62D,0x77F8,0x39C3,0xFB8E,0xBD59,
  0x7F24,0x40EF,0x02BA,0xC485,0x8650,0x481B,0x09E6,0xCBB1,
  0x8D7C,0x4F47,0x1112,0xD2DD,0x94A8,0x5673,0x183E,0xDA09,
  0x9BD4,0x5D9F,0x1F6A,0xE135,0xA300,0x64CB,0x2696,0xE861,
  0xAA2C,0x6BF7,0x2DC2,0xEF8D,0xB158,0x7323,0x34EE,0xF6B9},
 /* ROOK */
 {0xF854,0xBA1F,0x7BEA,0x3DB5,0xFF80,0xC14B,0x8316,0x44E1,
  0x06AC,0xC877,0x8A42,0x4C0D,0x0DD8,0xCFA3,0x916E,0x5339,
  0x1504,0xD6CF,0x989A,0x5A65,0x1C30,0xDDFB,0x9FC6,0x6191,
  0x235C,0xE527,0xA6F2,0x68BD,0x2A88,0xEC53,0xAE1E,0x6FE9,
  0x31B4,0xF37F,0xB54A,0x7715,0x38E0,0xFAAB,0xBC76,0x7E41,
  0x400C,0x01D7,0xC3A2,0x856D,0x4738,0x0903,0xCACE,0x8C99,
  0x4E64,0x102F,0xD1FA,0x93C5,0x5590,0x175B,0xD926,0x9AF1,
  0x5CBC,0x1E87,0xE052,0xA21D,0x63E8,0x25B3,0xE77E,0xA949,
  0x6B14,0x2CDF,0xEEAA,0xB075,0x7240,0x340B,0xF5D6,0xB7A1,
  0x796C,0x3B37,0xFD02,0xBECD,0x8098,0x4263,0x042E,0xC5F9,
  0x87C4,0x498F,0x0B5A,0xCD25,0x8EF0,0x50BB,0x1286,0xD451,
  0x961C,0x57E7,0x19B2,0xDB7D,0x9D48,0x5F13,0x20DE,0xE2A9,
  0xA474,0x663F,0x280A,0xE9D5,0xABA0,0x6D6B,0x2F36,0xF101,
  0xB2CC,0x7497,0x3662,0xF82D,0xB9F8,0x7BC3,0x3D8E,0xFF59,
  0xC124,0x82EF,0x44BA,0x0685,0xC850,0x8A1B,0x4BE6,0x0DB1,
  0xCF7C,0x9147,0x5312,0x14DD,0xD6A8,0x9873,0x5A3E,0x1C09},
 /* QUEEN */
 {0x1DD4,0xDF9F,0xA16A,0x6335,0x2500,0xE6CB,0xA896,0x6A61,
  0x2C2C,0xEDF7,0xAFC2,0x718D,0x3358,0xF523,0xB6EE,0x78B9,
  0x3A84,0xFC4F,0xBE1A,0x7FE5,0x41B0,0x037B,0xC546,0x8711,
  0x48DC,0x0AA7,0xCC72,0x8E3D,0x5008,0x11D3,0xD39E,0x9569,
  0x5734,0x18FF,0xDACA,0x9C95,0x5E60,0x202B,0xE1F6,0xA3C1,
  0x658C,0x2757,0xE922,0xAAED,0x6CB8,0x2E83,0xF04E,0xB219,
  0x73E4,0x35AF,0xF77A,0xB945,0x7B10,0x3CDB,0xFEA6,0xC071,
  0x823C,0x4407,0x05D2,0xC79D,0x8968,0x4B33,0x0CFE,0xCEC9,
  0x9094,0x525F,0x142A,0xD5F5,0x97C0,0x598B,0x1B56,0xDD21,
  0x9EEC,0x60B7,0x2282,0xE44D,0xA618,0x67E3,0x29AE,0xEB79,
  0xAD44,0x6F0F,0x30DA,0xF2A5,0xB470,0x763B,0x3806,0xF9D1,
  0xBB9C,0x7D67,0x3F32,0x00FD,0xC2C8,0x8493,0x465E,0x0829,
  0xC9F4,0x8BBF,0x4D8A,0x0F55,0xD120,0x92EB,0x54B6,0x1681,
  0xD84C,0x9A17,0x5BE2,0x1DAD,0xDF78,0xA143,0x630E,0x24D9,
  0xE6A4,0xA86F,0x6A3A,0x2C05,0xEDD0,0xAF9B,0x7166,0x3331,
  0xF4FC,0xB6C7,0x7892,0x3A5D,0xFC28,0xBDF3,0x7FBE,0x4189},
 /* KING */
 {0x4354,0x051F,0xC6EA,0x88B5,0x4A80,0x0C4B,0xCE16,0x8FE1,
  0x51AC,0x1377,0xD542,0x970D,0x58D8,0x1AA3,0xDC6E,0x9E39,
  0x6004,0x21CF,0xE39A,0xA565,0x6730,0x28FB,0xEAC6,0xAC91,
  0x6E5C,0x3027,0xF1F2,0xB3BD,0x7588,0x3753,0xF91E,0xBAE9,
  0x7CB4,0x3E7F,0x004A,0xC215,0x83E0,0x45AB,0x0776,0xC941,
  0x8B0C,0x4CD7,0x0EA2,0xD06D,0x9238,0x5403,0x15CE,0xD799,
  0x9964,0x5B2F,0x1CFA,0xDEC5,0xA090,0x625B,0x2426,0xE5F1,
  0xA7BC,0x6987,0x2B52,0xED1D,0xAEE8,0x70B3,0x327E,0xF449,
  0xB614,0x77DF,0x39AA,0xFB75,0xBD40,0x7F0B,0x40D6,0x02A1,
  0xC46C,0x8637,0x4802,0x09CD,0xCB98,0x8D63,0x4F2E,0x10F9,
  0xD2C4,0x948F,0x565A,0x1825,0xD9F0,0x9BBB,0x5D86,0x1F51,
  0xE11C,0xA2E7,0x64B2,0x267D,0xE848,0xAA13,0x6BDE,0x2DA9,
  0xEF74,0xB13F,0x730A,0x34D5,0xF6A0,0xB86B,0x7A36,0x3C01,
  0xFDCC,0xBF97,0x8162,0x432D,0x04F8,0xC6C3,0x888E,0x4A59,
  0x0C24,0xCDEF,0x8FBA,0x5185,0x1350,0xD51B,0x96E6,0x58B1,
  0x1A7C,0xDC47,0x9E12,0x5FDD,0x21A8,0xE373,0xA53E,0x6709}
}
};

const u16 zobrist_side = 0xB3D7;

const u16 zobrist_castle[16] = {
    0x0000, 0x1A2B, 0x3C4D, 0x5E6F,
    0x7891, 0x9AB3, 0xBCD5, 0xDEF7,
    0x0119, 0x233B, 0x455D, 0x677F,
    0x89A1, 0xABC3, 0xCDE5, 0xEF07
};

const u16 zobrist_ep[8] = {
    0xF120, 0xD342, 0xB564, 0x9786,
    0x79A8, 0x5BCA, 0x3DEC, 0x1F0E
};

#else /* PC build: 32-bit Zobrist for minimal hash collisions */

const u32 zobrist_pieces[2][7][128] = {
/* WHITE pieces */
{
 /* EMPTY */
 {0},
 /* PAWN */
 {0x92CAFEDB,0xFA2DF0F1,0x077C5FD8,0x9C7E1104,0x8B76704D,0x0CAB4849,0xB39CA55D,0x4FD4F0BA,
  0x1F0BAD05,0xFE5A5AE2,0x2E408A02,0xB9476A18,0xF3ABB8DF,0xD5ACC649,0x426ED206,0x1213FF5F,
  0x43ED674A,0xA87C01AF,0x07B0A4F7,0xB90FACC8,0x6D2FB3C1,0x6AB3CB45,0x7B9DCD35,0xF1009809,
  0xE11137EB,0xC3B708E2,0xD43D008C,0x4B4F88EB,0x78C852AD,0x4ED8B629,0xF8072C1B,0x17D66E4C,
  0xEFE4ADC0,0x84B08D7A,0x857DDA2B,0x99DD92C0,0xA87B5AC2,0xDAD79B7E,0x09EF534A,0x878D3FE9,
  0x30644A6D,0x89F16ECB,0xCDE1E64F,0xF8173B54,0x04B4641D,0xFF8C9418,0x8A6007FD,0x575588E8,
  0xBFD06D71,0x87ABFFF4,0xC4580903,0x753ACE6E,0x7DB6556F,0x377AE66C,0x6CD4A38C,0xE8A6E1AE,
  0x45F6CFA4,0xD694C80A,0x2A29ABCF,0xF7DD3CEC,0x3C6C7B90,0x58674C59,0xC7D0A090,0x737A1ED2,
  0x849203BE,0x949DF9E5,0x12B27539,0x810F9A1A,0x5FB76FE6,0x98A7CA3C,0x29D4C529,0x6EDE10C3,
  0xCE9764EA,0xA6E5310C,0xE9293476,0xC9C5E46D,0x55B732B4,0x6397DE2A,0xC4030E2A,0x8D3CE017,
  0x8283CECF,0x86B85068,0x8437E795,0x1F69F662,0x0A17D15C,0xB18EF3F5,0x2BB8D105,0x3CBDE1E5,
  0x5392C2A4,0x3D8E8F20,0x6877F741,0xEFC3FFAB,0x341190CA,0x8006F94B,0xFF5D0238,0x86C6DB39,
  0x20F6CADE,0xBD88C1DE,0xD4756659,0x14F17959,0xDEA87982,0x08217EDF,0x456F61D9,0x83219A98,
  0xF7CE7EF1,0xC54CD31F,0x8DC38AC8,0x22B27863,0xF52B8D70,0x8414A44E,0xA77087D8,0x1A0E1CA4,
  0xE81BA907,0x1528BD9E,0x9810D806,0xDC95712B,0x7D4DDD26,0x59457C1C,0xBAE57554,0xDB493DB4,
  0x15AB77C3,0xE8B517B7,0x1A5B5C9A,0xF0F45EE6,0xD0D86D2A,0xE3F6C338,0x4AC483CF,0xA91FBFC1},
 /* KNIGHT */
 {0x3634E47D,0x270BAF30,0xF7A39F1F,0x2B823B99,0xB182F63E,0x867B7262,0x70D86BEB,0xF51B84B0,
  0x40DADC75,0x00B2817A,0xD380779F,0x0BE3C8E9,0xEFA3C268,0x7A87FB54,0x05D78381,0xFB2E824D,
  0xE7832E97,0xE2DB192D,0x1461B956,0x079AE7FD,0x3F9378B3,0xB923A6DF,0xAC8AE2A0,0x095BEE38,
  0xE0D78FA2,0x9AAFF9DB,0x0DC7E6A9,0x5298566D,0xE614C79F,0xF0BB3BFB,0x752BE8E2,0x183305C8,
  0xF31525A0,0x371DE12A,0xE436A091,0x8773BDFE,0x63010D82,0x66E7DDB7,0x68788737,0x3C9705E3,
  0xE01E3837,0xD4D722CA,0x8A18E520,0xA42F5DAA,0xE52F606D,0x48F717A6,0x389F29B7,0xC6547D76,
  0x3C50AC38,0x845131F8,0x8A442CFA,0xF176AAED,0xEA4E3D1E,0xB652FF70,0xE2A70919,0x0B59CBC6,
  0x3489E24B,0xCB0373B1,0x05380792,0xD3FF4D34,0x610101FC,0x2CE2BCB3,0xB7A6B252,0x3811375B,
  0xF5F5BD55,0xA404F47B,0x8C161A59,0x6ACC23BE,0x4A6A66F3,0xFF170CD0,0xE72F2A80,0x7A73509C,
  0x8662D678,0x361BF7E7,0xFC37139F,0x5AEF103B,0xBDEDCFF2,0x9B115641,0xE1D9C015,0xD310A626,
  0xE47756C5,0x284DC46C,0x1E66936A,0x476C10EA,0xBD146E90,0xD68CF86C,0x16F8C144,0x85CE9285,
  0x0E9AD825,0xF3791802,0x2786D5D2,0x49F40412,0x1CC1972E,0x8CBD9965,0xEF92C8D9,0xA948245F,
  0x3C925304,0x9CCB8DDE,0xC0385117,0xE32B68E1,0xB4772DAD,0xAB539397,0x9011AF7D,0xA0174AA6,
  0x174A25C0,0x03B4160A,0xBAB62D74,0xA217700D,0x09D6AC2C,0xA04E0CF2,0xFB3E4F66,0x5F10CC4D,
  0x9A3401AB,0x627A1565,0x5FF7B096,0x8F66EA45,0xEB6761D8,0x5F3009C8,0xDEE2E0D6,0x4FB92035,
  0xFA550F26,0x43238099,0x974B9908,0xE4F083DD,0x37771DC0,0x5A91FE8E,0x2BBE496D,0x06763EFA},
 /* BISHOP */
 {0xC7288CDD,0x830035D6,0xF38294F5,0x8F233163,0xB156A439,0xCF50FE98,0x72E6F1F0,0xA1B8C842,
  0x3748EE7A,0x542F16AD,0x4B48837C,0xDE6B5BD3,0xDB3C33AA,0xABFA5E9F,0xBB34BD8B,0x50BEF179,
  0xF4B39222,0x8D5A1F88,0x5892A83E,0xBDD774C5,0xFD955967,0xC00966A4,0x8D407C1F,0xC94797DF,
  0x16CA6ED1,0xDAB5C089,0xAE68465A,0xA3317927,0x8F978153,0x58931ED4,0x2097B765,0xE96C8C65,
  0xE137473C,0xA987401C,0x05B2DBA8,0x3D29C30D,0x13DCF611,0xC49585C1,0x3329930B,0xD6102BDB,
  0xD6994D08,0xE5B71149,0x04000E50,0x53A4C747,0xB5017668,0x31109DF2,0x428C9FC3,0x57813D29,
  0xACE1B19D,0xA10E4BE0,0x4F9447AA,0x1608E573,0xB9C2CAF1,0xB50B910B,0x0F301576,0x1DA44FEA,
  0x444BDB0B,0xB779E9E1,0x933B22E8,0x57E6A1B6,0x92E44B63,0x6BED2D76,0x7CFA37F7,0x6820678D,
  0xD9AC8B3C,0xCB250050,0x5B73808F,0xFC893536,0x04C3BB7A,0x2B509663,0xE7197833,0x4BF27DF7,
  0xBBE8CE1C,0x7FAA1FE9,0x660D9EFF,0xA0E7EF35,0xA12FB232,0x4719C319,0x1CBD63A7,0xBE4F4840,
  0xA5B41D11,0xE8BB0F40,0x8BE5AB32,0xA93F883E,0x2E4C502A,0x94E8016B,0xA0CCAD0D,0xF6AD8CB1,
  0x7EE4415B,0xE6CB610B,0x77FA794B,0x289E4B6F,0xCB8EB996,0x8501ACAF,0x343B7949,0x4411200E,
  0x6C98654B,0x160C7DF1,0x43E32054,0x0EB3E3F3,0xC79589B8,0xA4F64D6D,0x542C747C,0x4FC8B380,
  0x79B4CFBB,0xDAD7F965,0xA72E2354,0x6AD55D9E,0x34EE8452,0xC3236445,0xFE3110F6,0x7733D948,
  0x08FB89DE,0x3FB27A92,0x3EF25907,0x8795062D,0x5FDE2933,0x37971342,0x3E7E7698,0xDDDA65FA,
  0x84E716E7,0x3EE188F9,0x9D4BC4DD,0x6840D26A,0x2F7122FA,0x6027FD6C,0xB9222A4A,0x5BB3453D},
 /* ROOK */
 {0xD62B9340,0xD4215513,0x7EBBA1C6,0x1D4452A0,0x166BB8A1,0x0F70E56B,0xA992EECF,0xE4D7726F,
  0x46254C56,0xEBE40094,0x0AB23B81,0xDEBF0F83,0x81DE2C45,0x522B6D62,0xE8F98FED,0x73FBA83E,
  0x41AC9F0E,0xBA413BCF,0xB64C5308,0x382CF358,0x1381D97D,0x61AF3C1B,0x08F332CF,0x2011B4C9,
  0x14D0B98C,0x29F1A1F8,0x796BD27E,0x062B72D7,0xEE0ED010,0xA7931CDD,0x0EB203B1,0xDF41ECDF,
  0x79B951C1,0x3C156A16,0x378E2EE4,0x70E36F9E,0x004BE67E,0x35516EF1,0xDC1EBD25,0x44AB7F05,
  0xBECF12F0,0xA56E3328,0x1734DDC8,0x65C50849,0xEF0722BB,0xF491E3D3,0x7DD82749,0x2834D05D,
  0x1255A1F1,0x6C3AB9D3,0x188A9106,0xBEE706F6,0x8F7D0C46,0x841FD2AF,0x64AAD606,0x9543CCCD,
  0x04256921,0xEDE07ED5,0xEC2E25B4,0xC40711F1,0x713C78ED,0x042DCFA8,0xA992862F,0x2C94E8C3,
  0x482C244C,0xC34923C5,0xECD6ED7B,0x62606F62,0xD64A5EB0,0xFDB4271D,0xA0C20371,0x7B93D82F,
  0xF2C6E190,0x879C995B,0x74FFBB77,0xB6EC36E7,0x14D186E5,0x033883BD,0x90ADF50B,0xF91F70CF,
  0x2EE42AC8,0x72F97219,0x4D6595AE,0x4CCE154E,0x033DAF18,0x33684482,0x668CBAA1,0xFE0A4A31,
  0x10652FB9,0x67EABE44,0xE4A1682A,0x22DAAC5D,0xB3BFF585,0x90E0E8D6,0x00726363,0xA1639ED1,
  0xD7F0D61F,0xFBDF0842,0xEAD29492,0xEBACC31F,0x404D2350,0xE51C383F,0x98FCFC65,0xABA07FCB,
  0xC8A264D1,0xF47DED23,0xE276DDCB,0xB62A0DEB,0x7D671462,0xE4966D6B,0xE069FADA,0x0BC40551,
  0x225B43E2,0x53544BEE,0xE35E2166,0x3BCDAD54,0x01BBA6C8,0x0D55CE7C,0x439070FD,0xE0DC246A,
  0x84BA7033,0x23DEA83D,0x45172E12,0xC0BC3125,0xA107B777,0x57115607,0xB4F994D4,0x2D696F7D},
 /* QUEEN */
 {0xAAFA6057,0x5541E52D,0x6FA09557,0x1A20824D,0x7EB814A6,0xC50B2C33,0x3AAC81E5,0xB1CC5A72,
  0x1F9EC11A,0x2DFF1CD1,0xB0C68C6E,0x092B77F9,0x1DCCD4E4,0xA188AF28,0x07830C96,0xFE58394B,
  0xE06AFC2D,0xA37E5C93,0xD3475C90,0x003EA798,0xD7262BAE,0xFEE79465,0x05AA9462,0x5584CEBC,
  0xBD1B718F,0xCE6D06CC,0x0D21C3A8,0xEB0AEB73,0x80452D7F,0xD12934DE,0xAE1C4EE0,0x8CB7EEFE,
  0xF23BB02B,0x691B3255,0x783EF2C5,0x71C3BB85,0xA2A52CCC,0xF8D25E88,0xB6154DB6,0x992EA1CD,
  0xFEEF8BB6,0x8C8F713B,0xB4AEE861,0xFF052A96,0x3C7EFB6A,0xE540824D,0x72AF261D,0xC2797967,
  0x1C7592ED,0x9E04A766,0x82DE53FB,0x79465BFD,0xFC553F90,0x746E3D9C,0x3BD7B4A8,0x2A62245C,
  0x83DA659D,0x92DC2FFE,0xF9CDBBA9,0xEB1D92D3,0xCDBE7044,0x86EF49E3,0x60EFBAEC,0x0326B843,
  0xEF415DE0,0x16FE68A5,0xDBF37FFD,0xA7FF11C7,0x933EF87B,0xEF15A46E,0x8D53B417,0x7C7496E3,
  0x8503A29F,0x0664ADFD,0x607F7A1D,0x473FF9D1,0xBF2DDEFA,0x0B211A9E,0x2F7D404C,0xC49A0492,
  0x3B6ADDB4,0x2570F143,0x3EB14C8D,0x97B9F574,0xC1F10616,0x6D588748,0x5D56F039,0x1AC9D635,
  0xD79743DA,0x53EF7FF5,0xE730595C,0x4CDB27EC,0x93FF3747,0xF3D4EA1C,0xA53D78E1,0xA8622820,
  0xC63D865C,0x5CDE174E,0x6AD511B0,0x5546D79A,0x65F49F64,0xC7C41C1D,0x7E442C13,0xD78AFA23,
  0x770E9AFE,0xD0891064,0x6382E240,0xC259C7DE,0xCBC7DA52,0x1A1DFE74,0xCF61E947,0x388E822C,
  0x8EDC74AB,0xD5935B3D,0x271882CB,0x11BB8643,0x45DED959,0x5CDC41F1,0x3BA7F3DD,0x7158D021,
  0xC688AF21,0xF98F2AD9,0x743233A5,0x912FA2E0,0x7C5F8582,0x765E60F4,0xD16B3B63,0x0C53CA56},
 /* KING */
 {0x270C906B,0xDC89D43B,0x51060ECB,0xD4F48E57,0x20D4DD92,0x1B9B6DC1,0x73C4D87A,0xBC3FD23D,
  0x9F51F9B6,0x4B6042FB,0x34AAA219,0x96D43B79,0x95D8FD43,0xAFFB7E76,0x57987D42,0x8EC15D96,
  0x4F395BDB,0x9F51BF51,0xD308EC40,0x55C53D7B,0xA4930DDC,0xB9F97D82,0x46FC623C,0x64CDDDD9,
  0xD5906D57,0x243F4178,0x3843C42C,0xFF6B296A,0x9FF7BE24,0x1B0F738E,0xE2056EE6,0xC47AA0F7,
  0xAB98DB83,0xEE367BC5,0xA4B1EB5A,0x58B2D0A3,0x59ADC96C,0x91BAA23C,0x8A77AC2D,0xE92F2A45,
  0xC13ACA60,0x297855B4,0xB4210F8E,0xCE170168,0x65351CD1,0xD5A157DB,0xA64FE780,0x77FB7EAB,
  0x853C7CDD,0x3149A0F8,0x3E2EA86F,0x1AF5BB09,0xE00D85EE,0x76B0A9F5,0x85267F8E,0xE02098F1,
  0x263DC0CD,0xAA88D6F7,0x244A47E6,0x0C1AEF0A,0x1AF853A7,0x10F55763,0x18789759,0xA4153E98,
  0x094A5296,0xBE7A5EE4,0x53DB36A3,0xBE6771D6,0x01DF3C89,0xEBC374AA,0x36B833BF,0xF73C75AC,
  0xCAB4967D,0x4B706B28,0x13AD8725,0xA8F9C3A0,0xB11B1516,0x3AB32CCD,0x545CBD7B,0x4853B5D7,
  0xF45D3307,0xDFD5D8DE,0xBA207B13,0xE78A88CB,0xE8AC1BF2,0x1C098672,0x41ECAFBD,0xE71B2B28,
  0x535D6C91,0x57781852,0x727C2965,0x73C39970,0x733B5B28,0x8B8C4BB6,0x4F603601,0xCF25D076,
  0xCE9A190F,0xDD1C2465,0x5372D27C,0x5B79804D,0x467FB0CD,0x0FE179F1,0x4ECF4B45,0xFFDD85EB,
  0x0A2FEDB7,0xF7121E8C,0x655D9FB2,0x95E58A0A,0xAA9711A9,0x1556657C,0x52E21F01,0xE6D0E2DB,
  0x9A469B6B,0xE89FFBEA,0x3292BBCC,0x1AC36F61,0x1DE6A7CB,0x6289CB04,0x4B641435,0x423E8D40,
  0x90539AE3,0xEFB827D0,0xED44F48D,0xE140FA59,0x92BBBE43,0x025F3C0D,0x8A4E8CE1,0x23C626AD},
},
/* BLACK pieces */
{
 /* EMPTY */
 {0},
 /* PAWN */
 {0x73371D1D,0xB24F8653,0xEC097455,0x23A89F6D,0x98DA1AE7,0x89B1CAE7,0xB1956427,0x819C6F40,
  0xB3AC2AA6,0xC672D743,0x7B12A8E7,0x6E040148,0x487F96AD,0x5F24951E,0x31323CB0,0x69E71BFE,
  0xC14AB130,0x31231F30,0x502A9B62,0x47B55E3C,0x1719B3EF,0xBA4FAE42,0x3FFEFEB0,0x4BDE1E6A,
  0x4A7F316E,0x240D6C44,0x37CD9127,0x79096B73,0x6EDC03BA,0x66A1BEF3,0x9645B334,0xD620BB7C,
  0x4DFECA51,0xC000786B,0x3C09D0D0,0x0650F06B,0x9156193D,0x6F837370,0x076D996B,0x7D504C14,
  0x4887843B,0x6C656F7D,0x60797DC5,0x47BC73EE,0x81424278,0x32FDB8E9,0xBB682FAB,0x2968E636,
  0x18C2F912,0xB66EFAEF,0x767080A7,0xD9D7E76F,0x49F9C3E2,0x9F6948D7,0x2B127D5E,0x36483808,
  0x61FF4111,0x79B34BC9,0xB40E5EC4,0x2DEE5809,0x5056C619,0x6A296BA2,0x47948187,0x68F51F20,
  0x520ACDDD,0x9B5DF489,0x7CC071D0,0x3382CE99,0x6654FB82,0x7EED4A43,0x7674FB2D,0xF9F4402C,
  0x3F458553,0xFB614F83,0xEB29C7FC,0x12949B5E,0x6D2227E2,0x55712E6B,0x7E711BDB,0x3A83155A,
  0xEE74FA51,0x68E64123,0xE444E082,0x555BEE12,0x095F1526,0x472E233A,0x8A40192C,0xA82023E6,
  0xC46F756E,0x5C58BF8E,0x63F158CF,0x6F4A3374,0x569FDE64,0x631D46FA,0xA62A57EC,0xDA04F607,
  0xA9850D3F,0x4C60B754,0x46F00C79,0x8AA2A389,0xCE850BF3,0xE919C7B2,0x044C7754,0x480DC6F4,
  0x8821600E,0x0020FB27,0x8B4D9AD1,0x547F6633,0x42CD694C,0xBC02143B,0x1FA3AA1E,0x5D33F432,
  0x4E3E090C,0xA1EE3195,0xD8B8C99D,0x0C39162D,0x14C2AA13,0xF546367E,0x98207714,0x46372CA1,
  0x188868C4,0x440943D6,0x73ED8B3C,0xEB88CC6A,0xF74A77D5,0x4AB0C0B3,0x66C92829,0xB7DAF761},
 /* KNIGHT */
 {0x25C2829B,0x3835D6AE,0xD6A8B0D2,0x080240E4,0x76C40A63,0x76C554E9,0x90C051F8,0xCD9D7458,
  0x61D96C36,0x54F60824,0x55C7F54A,0xA1B3FBD0,0xD887D1B3,0x3C5F7778,0x5C53A62F,0x2728CFAE,
  0xD0E5DEF4,0xAF15B9B4,0x3604B937,0xDB9B2B87,0xF88DA4B2,0xE02FD506,0xF9AAB931,0xC52A1970,
  0xB477D11F,0x92B7FC8B,0x5324612E,0xF230C513,0xFAC232F7,0xD3B1B0E1,0x4D6FAE3A,0xC98BA369,
  0xAD8A012D,0x5B644930,0x290D71E6,0xF7ACCA66,0xA04DB70D,0xBDA0FFA9,0x4A58BD11,0x5DCB3F89,
  0x73129D41,0x7BE4AA7B,0xCA3E110B,0x4A372079,0x68386C35,0xAB72AD36,0x09454104,0xFFB22DD7,
  0x83059FAC,0xA1117FC1,0x4987E0E1,0x20DECB82,0x0932AEFC,0xE79991C7,0x9026172C,0xA111406E,
  0x9B93521C,0x98C70749,0xA94E4F72,0xCE7CBAA5,0x7BA9EFC9,0x4C9561D2,0x2787BE01,0x63E45821,
  0x1C10AD66,0xA7D8980A,0xA291F32A,0x2C8A4017,0x07743497,0xCFEE2F0D,0x8A43280E,0x9FF04416,
  0x2832D019,0xD51887E3,0x1102CEF8,0xC15FE791,0x314E6565,0x5516CD0A,0x9CA5505F,0xCED80ECC,
  0x749988FF,0xBEAA9545,0xC8FBF9F7,0xBCBB7BBA,0x07EF3357,0x55563A0F,0x15DCF556,0x32E66429,
  0x4BF387FB,0x338BDFC8,0x551C43DD,0xCD096408,0xCD98845E,0x0885D389,0x20C7DC33,0x81CBD226,
  0x6A5B4133,0xB85C72B1,0xAEA33359,0xA2F4D246,0x07F8F8E4,0xE162FF05,0x18EC99FA,0x3A54DC2B,
  0xAAF971D5,0x3A7E2393,0xB9CA19E8,0xDF57EC8B,0xBF5F97B3,0x2743BD72,0x6F61FCB9,0x4E25A197,
  0xD0EFF768,0x325A2E17,0x66E6BBCF,0x8C1EC571,0x5059ACBC,0x0333E531,0xDA00887C,0x23EB90B5,
  0x643168E2,0x963CA116,0x559D59A5,0x585E3F7F,0x2FBAAA5D,0x1F6AC06E,0x8464BE48,0x22392E71},
 /* BISHOP */
 {0xC2D46881,0xD21599AD,0x78589A8B,0x5EB6B044,0xF75BFB85,0x44039F22,0xBAC4C521,0xEBB7A090,
  0x6CF71226,0xFE6B4838,0x735F5630,0xADC1592A,0x2AAF5D5A,0x1A229354,0xF0E00737,0x637241AA,
  0x2D24BC1F,0xB1E98801,0x6DF02743,0x23C9C8AF,0xAC68D1B5,0x26020C63,0x6341571D,0x5CDBFD82,
  0xAB97A158,0x32AB3672,0x8C390741,0xC72D6DD1,0xF23B4ED9,0xE82AAD5B,0xDB5DC9C4,0x14CA89C5,
  0x49B1276A,0xAD70B9AC,0x3CC23A03,0x3C9A05F5,0x894DB490,0x00B99511,0x03BC7318,0x85CBAA38,
  0xC1BBDB49,0x6F1B2AA0,0xF4D43A55,0x34244813,0x87BA6A6D,0xFB12A517,0x19084483,0xB6FAEEBE,
  0x0288D7DE,0x7874B5B4,0x38D752B2,0xA88B96FF,0xE2A5A6C2,0xBF2046F2,0xE54A31B3,0x6A09DE6A,
  0x5DF754D2,0x5C003AD1,0xC8516354,0x1E9C0333,0x0D2743E1,0x1C97E786,0x146FAAF9,0xB0F98B05,
  0x8312C06A,0x77426844,0x66FEE747,0xE2CB488E,0xD9CAA212,0x9EDE2B73,0x5D53E06C,0x561A054D,
  0xF531FEE7,0x444C8F55,0x26374286,0x5493365E,0xE8844BB0,0xAAB1DED1,0xB1D15115,0x61FA9DF9,
  0x76DF65DF,0x3521FE2D,0x48E2F0BC,0x5B48E530,0xBD646A0B,0xDFB0B1F2,0xD33EB6F4,0x3B2F96D4,
  0xB5DA160E,0x3471AE62,0xE325F8DC,0x2D7A59AC,0xE89B5355,0x59D950D1,0x8D52BE0C,0x09F0B0C1,
  0xBACB6AB9,0x77C86CF1,0x7DEA88B7,0x0359A4A7,0x63229BF6,0x96F361C1,0x99E48ABA,0xBD83A035,
  0x21FA21C3,0x569C8A04,0x8F8324DA,0x2D22285A,0x9306C8F9,0x937EB5D8,0xFF4677BE,0x9148FEF4,
  0x91D29965,0x41533EB9,0xF239A9C8,0xF32C46CB,0xA40E498A,0x7EA66871,0x4E7D15BE,0xBDDFCBD8,
  0x14290A50,0xB334CE79,0xED43E573,0xB7532894,0x6913D147,0x87BD5A7A,0xBEA61551,0x0C124098},
 /* ROOK */
 {0x78086460,0xDAD1DAFC,0x74519A14,0xCACA2E0E,0x391F2409,0x4E7062BD,0x8EE639D3,0x48E5E74A,
  0x29CB35D8,0xB8578CAB,0x48D21E57,0x4C734DAE,0x39DACAF7,0x96EE9805,0xDC25629D,0xBE3943EE,
  0x522923A9,0x76901814,0x9D496E9A,0xE3D1E9A2,0xC0D57AEE,0x355EB647,0x65072DFE,0x2AF45D4B,
  0x334A09FF,0xB0812D20,0x8951605C,0x00013382,0xECCFF7CC,0x4CE6C6C3,0x117675DB,0x9E8F6078,
  0x18DE2D73,0x78E61436,0xEDEE3075,0x5D8CE94A,0x2C997E10,0x945AC3BF,0x869799BB,0xEB5955E9,
  0xC70D8D98,0x5AF9AA4D,0x58CE719A,0x44BA5727,0x93F93677,0xDA27EDD3,0xDB169DC6,0xB4652E7E,
  0xF3BF96AD,0x6A417C6F,0x80A98D4C,0x7981C8E3,0x02F5E80E,0xB0AA5C82,0x91419CF2,0x3AA3A82B,
  0xC4475179,0x50AC80C2,0x721950D0,0x53D6C063,0xC1CBAFBA,0xF2D48B26,0xED6ECE82,0xC5436316,
  0x6CC5461F,0x3708C559,0xB3CCC723,0x25740404,0x9C97300C,0xD826D107,0x0156C664,0x8C699996,
  0x27463A8B,0x1BC75831,0x5FC56BA2,0xC3BA8E59,0xA113A335,0xF7AA1E6E,0xA47D2A14,0xAF0D1C8E,
  0xD7B8BD30,0x948FF3C9,0x42C10642,0x3429A915,0x4C1C8B39,0xB2BCF798,0xB6D6292A,0xB3FC6FC2,
  0x6D367D13,0xA64BC23E,0xDD68D1F8,0x5B009BBF,0xA5F39815,0x627ABCD3,0x83E26E57,0x705E0663,
  0x272D4D13,0xF5DB86E1,0xD1C22F90,0xA5C81CD1,0xA1129F8F,0xE5A3DB26,0x97EA0CA1,0x3BCA5269,
  0xD2A7C91F,0x60E039F5,0xB3E87D12,0x5457D404,0x9911C2DE,0x93EB5088,0x0612C7FF,0x8A3351A9,
  0xF3DDE9AE,0x0B91142E,0x386A5259,0xF2807DAC,0x01EF7853,0xFAD5B546,0xFFBF98E2,0xAABA27B0,
  0x83FA25CC,0x12E2702C,0x261D081C,0x9ACB391C,0x90FED423,0xAADE13AA,0x0D16E9CC,0x80A8D337},
 /* QUEEN */
 {0xE0896271,0x739BAF34,0x676201AA,0xF4DB7305,0x0CA94524,0x18539F6F,0x92BCF489,0xF0CBAA28,
  0x48691EDE,0x1F229C21,0x7AC232A2,0xE3CE4B78,0xEC8214E9,0xE600795A,0x470E9124,0x5EC08888,
  0x90918FD3,0xD7258BB3,0x1F7AA659,0x1A355FB2,0x784DE213,0x07ED636D,0xD8D5036F,0x62542720,
  0xAF61C0DE,0xD9B45B06,0x9DA363B6,0xA3CF59DB,0x7EA48FE1,0xE5077E81,0xC1E4F007,0xE9D73094,
  0x36FEC680,0xC47E6146,0xE903FBE8,0x3E80BDF1,0xF7B9F35F,0x14011012,0x87D71DF5,0x8E31D684,
  0x5CBD5081,0x2A4E3298,0x7033AE88,0xDB49BBB5,0x5EFCA09F,0xD27A46F6,0x72B4F159,0xF08854D1,
  0x2ACF4FBA,0x4CA9CA21,0x8B9DECCE,0x09500C8A,0xCE1E734F,0x18A0DFE4,0xB89CC134,0x71BDEA1C,
  0x77B80F43,0x5E2EF09E,0x2D83D779,0xF4461B88,0x952FFA0C,0x1C208A2B,0xD70C3159,0x42B3FAD7,
  0xA3C6244A,0xB53EDE1A,0xAB1A7DE6,0xFEB13F0B,0x57E8F841,0xC3D05C13,0x55BAD4A1,0x0EDF2D2A,
  0xA5E3DF8A,0x84A6EB97,0x60FA35AB,0xCA111403,0x2355D69C,0x358899BD,0x26ED96B6,0x167621F8,
  0xDAB0E6BA,0x007F0320,0x4027D06F,0x799EF216,0x76367B6D,0xB72EFC3F,0xD7ED97F5,0x64391650,
  0x64A72F55,0xCF453A8B,0xBDC4B5EE,0x10760288,0x731FE627,0xE094AF9A,0x52C7D0CF,0x7971226B,
  0xD963FC6B,0x024739DD,0x72CDBF87,0xFB273872,0x774BA480,0x9FD29A82,0x6889CCF0,0xF2F1D449,
  0x437CB728,0x39DCD3BA,0x7D6DAB6C,0x40822EF5,0xC819FF3C,0xDF13701E,0x0A175E19,0x816AC57A,
  0x77CC9064,0x9366A326,0x1BA4608A,0x19E23B73,0xC08D145F,0x634630F1,0x9354BBD0,0xAD858695,
  0xFB2D363D,0x2EE9999D,0x3843918B,0x14A9EEDE,0x805E75BC,0x38E2BC07,0xEF8C1C2B,0x8A152302},
 /* KING */
 {0xFFFB3FB8,0xEB5681AE,0x2DFC6A45,0xE2FD35E6,0x92D22FDA,0x12F806D7,0x39C4F356,0xD09D59E0,
  0x4F8AE361,0xADF9BD43,0x914E48FD,0x1BEF42AF,0xB04AE2C5,0x687A6AEC,0xF6B501DE,0xD2F50323,
  0xA465EEB6,0x6A5C2AFD,0x7A8FEDB2,0x8E9ECF51,0x562EE33C,0xFD96A712,0x93AE5E81,0x625A3FA8,
  0x791E1894,0xAA9EA161,0x38EA6CB0,0xB5E9A14F,0x64289701,0xD1B904C0,0x4359AB76,0xE05090CD,
  0x3AC15AD0,0x1EB70560,0xF7CB16F0,0xBF34FF2D,0x6C20D01C,0xB13E4D9B,0x5124675D,0xC3BBD2F0,
  0x004E048F,0x3AA8A0B8,0xCDD52989,0xB34BA2C7,0x91CB8A26,0xB16F00B9,0xC1DD690E,0x32F19EA2,
  0x4AEE18D9,0xB3A0F5DA,0x15FFBA07,0xABF7F6E8,0xD3D534E3,0x24F74097,0x364A77AC,0x2D7BA3E8,
  0x2E401CCA,0xC4A253E5,0x7F6F9A92,0x0355505E,0x8D3BEDF0,0x3A015BC1,0x3CBF732D,0xEEC09B3F,
  0xF7DFF0B7,0x859E47C1,0x7B48A804,0x1A1EB5A7,0xC7E88F55,0x444AAF65,0x4BA35A3C,0x4CA03B99,
  0x3D06480A,0x6256BD17,0x7B0BAAC3,0x2DAD96B5,0xC061938B,0x49B1B07E,0x8683743B,0xEB961850,
  0x1A65E484,0xCE49AA4B,0x134D8A6F,0xEA46B228,0x5A1283B4,0x3B055861,0x9BD39043,0xD5AEEDC0,
  0x46AE8E0F,0x267B7212,0x54833DE1,0xD7E3D1F5,0xA6352C44,0x181BACE6,0xC5A782F8,0x1D9C2FB3,
  0x6B4D83F0,0x72831079,0x9A7BE29B,0x6F8DABA8,0x84742BD1,0x9E6F5267,0x40D45CD9,0x418E589E,
  0x0AEDD2E3,0xF894A169,0x369815B1,0x4E98CEE8,0x9180260F,0x58553343,0x2BF411FD,0x10A136D4,
  0x00DF7135,0x037E9E84,0xEAF768BE,0xC287E43F,0x47515F02,0xE432D26F,0xF4297F23,0x32268FE0,
  0xE69FE4B4,0x7EDAF631,0xAF9745C7,0x1679AC98,0x7ACF2366,0x087EF29C,0x28620102,0xC3C5449F},
}
};

const u32 zobrist_side = 0xC32E573A;

const u32 zobrist_castle[16] = {
    0xBF244D25, 0x6F80E7F1, 0xA221FFF6, 0x4BCAD56D,
    0x02B52321, 0x68446594, 0xE77809EE, 0x73363905,
    0x0B3C5DFC, 0x61E10136, 0x829085A0, 0x7838100A,
    0xDAA1F795, 0xA4E3D953, 0x4EEA807D, 0x86F22460
};

const u32 zobrist_ep[8] = {
    0x769ED188, 0x63474AA4, 0x498EDD65, 0x5869B731,
    0x05FAD954, 0xE553BF37, 0x0716408F, 0x6E0AB88F
};

#endif /* TARGET_C64 */

/* MVV-LVA: [victim][attacker] -> score offset
 * Higher value victims and lower value attackers get higher scores.
 * Added to base score of 200 for capture ordering. */
const u8 mvv_lva[7][7] = {
    /*           empty  pawn  knight bishop rook  queen  king */
    /* empty */  { 0,    0,    0,     0,    0,     0,    0 },
    /* pawn  */  { 0,   15,   14,    14,   13,    12,   11 },
    /* knight*/  { 0,   25,   24,    24,   23,    22,   21 },
    /* bishop*/  { 0,   25,   24,    24,   23,    22,   21 },
    /* rook  */  { 0,   35,   34,    34,   33,    32,   31 },
    /* queen */  { 0,   45,   44,    44,   43,    42,   41 },
    /* king  */  { 0,    0,    0,     0,    0,     0,    0 }
};

/* Knight move offsets (8 directions on 0x88 board) */
const s8 knight_offsets[8] = {
    -33, -31, -18, -14, 14, 18, 31, 33
};

/* Bishop move direction offsets */
const s8 bishop_offsets[4] = { -17, -15, 15, 17 };

/* Rook move direction offsets */
const s8 rook_offsets[4] = { -16, -1, 1, 16 };

/* Castling rights mask: AND with castle_rights when piece moves from/to square.
 * Most squares are 0xFF (no change). Rook/king squares clear relevant bits. */
const u8 castle_mask[128] = {
    /* Rank 1: a1      b1    c1    d1    e1    f1    g1    h1 */
    (u8)~CASTLE_WQ, 0xFF, 0xFF, 0xFF, (u8)~(CASTLE_WK|CASTLE_WQ), 0xFF, 0xFF, (u8)~CASTLE_WK,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, /* off-board */
    /* Rank 2-7: all 0xFF */
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    /* Rank 8: a8      b8    c8    d8    e8    f8    g8    h8 */
    (u8)~CASTLE_BQ, 0xFF, 0xFF, 0xFF, (u8)~(CASTLE_BK|CASTLE_BQ), 0xFF, 0xFF, (u8)~CASTLE_BK,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF  /* off-board */
};

void tables_init(void) {
    /* All tables are const/hardcoded - nothing to initialize at runtime */
}
