#include "tables.h"

/*
 * Material values indexed by piece type
 * Index: 0=empty, 1=pawn, 2=knight, 3=bishop, 4=rook, 5=queen, 6=king
 */
const s16 material_value[7] = {
    0, 100, 320, 330, 500, 900, 20000
};

/*
 * Piece-Square Tables
 * From chessprogramming.org Simplified Evaluation Function
 * Layout: a1=index 0, h1=index 7, a2=index 8, ..., h8=index 63
 * Values from White's perspective.
 */

const s8 pst_pawn[64] = {
     0,  0,  0,  0,  0,  0,  0,  0,   /* rank 1 (pawns never here) */
     5, 10, 10,-20,-20, 10, 10,  5,   /* rank 2 */
     5, -5,-10,  0,  0,-10, -5,  5,   /* rank 3 */
     0,  0,  0, 20, 20,  0,  0,  0,   /* rank 4 */
     5,  5, 10, 25, 25, 10,  5,  5,   /* rank 5 */
    10, 10, 20, 30, 30, 20, 10, 10,   /* rank 6 */
    50, 50, 50, 50, 50, 50, 50, 50,   /* rank 7 */
     0,  0,  0,  0,  0,  0,  0,  0    /* rank 8 (pawns never here) */
};

const s8 pst_knight[64] = {
    -50,-40,-30,-30,-30,-30,-40,-50,
    -40,-20,  0,  5,  5,  0,-20,-40,
    -30,  0, 10, 15, 15, 10,  0,-30,
    -30,  5, 15, 20, 20, 15,  5,-30,
    -30,  0, 15, 20, 20, 15,  0,-30,
    -30,  5, 10, 15, 15, 10,  5,-30,
    -40,-20,  0,  0,  0,  0,-20,-40,
    -50,-40,-30,-30,-30,-30,-40,-50
};

const s8 pst_bishop[64] = {
    -20,-10,-10,-10,-10,-10,-10,-20,
    -10,  5,  0,  0,  0,  0,  5,-10,
    -10, 10, 10, 10, 10, 10, 10,-10,
    -10,  0, 10, 10, 10, 10,  0,-10,
    -10,  5,  5, 10, 10,  5,  5,-10,
    -10,  0,  5, 10, 10,  5,  0,-10,
    -10,  0,  0,  0,  0,  0,  0,-10,
    -20,-10,-10,-10,-10,-10,-10,-20
};

const s8 pst_rook[64] = {
      0,  0,  0,  5,  5,  0,  0,  0,
     -5,  0,  0,  0,  0,  0,  0, -5,
     -5,  0,  0,  0,  0,  0,  0, -5,
     -5,  0,  0,  0,  0,  0,  0, -5,
     -5,  0,  0,  0,  0,  0,  0, -5,
     -5,  0,  0,  0,  0,  0,  0, -5,
      5, 10, 10, 10, 10, 10, 10,  5,
      0,  0,  0,  0,  0,  0,  0,  0
};

const s8 pst_queen[64] = {
    -20,-10,-10, -5, -5,-10,-10,-20,
    -10,  0,  5,  0,  0,  0,  0,-10,
    -10,  5,  5,  5,  5,  5,  0,-10,
      0,  0,  5,  5,  5,  5,  0, -5,
     -5,  0,  5,  5,  5,  5,  0, -5,
    -10,  0,  5,  5,  5,  5,  0,-10,
    -10,  0,  0,  0,  0,  0,  0,-10,
    -20,-10,-10, -5, -5,-10,-10,-20
};

const s8 pst_king_mg[64] = {
     20, 30, 10,  0,  0, 10, 30, 20,
     20, 20,  0,  0,  0,  0, 20, 20,
    -10,-20,-20,-20,-20,-20,-20,-10,
    -20,-30,-30,-40,-40,-30,-30,-20,
    -30,-40,-40,-50,-50,-40,-40,-30,
    -30,-40,-40,-50,-50,-40,-40,-30,
    -30,-40,-40,-50,-50,-40,-40,-30,
    -30,-40,-40,-50,-50,-40,-40,-30
};

const s8 pst_king_eg[64] = {
    -50,-30,-30,-30,-30,-30,-30,-50,
    -30,-30,  0,  0,  0,  0,-30,-30,
    -30,-10, 20, 30, 30, 20,-10,-30,
    -30,-10, 30, 40, 40, 30,-10,-30,
    -30,-10, 30, 40, 40, 30,-10,-30,
    -30,-10, 20, 30, 30, 20,-10,-30,
    -30,-20,-10,  0,  0,-10,-20,-30,
    -50,-40,-30,-20,-20,-30,-40,-50
};

/* PST pointer table indexed by piece type */
const s8 *pst_table[7] = {
    (const s8 *)0,   /* 0 = EMPTY */
    pst_pawn,        /* 1 = PAWN */
    pst_knight,      /* 2 = KNIGHT */
    pst_bishop,      /* 3 = BISHOP */
    pst_rook,        /* 4 = ROOK */
    pst_queen,       /* 5 = QUEEN */
    pst_king_mg      /* 6 = KING (middlegame by default) */
};

/*
 * Zobrist random numbers
 * Generated from LFSR with seed 0xACE1
 * 16-bit values are sufficient for the C64's 4KB TT
 */

/* Simple 16-bit PRNG for generating the table at compile time.
 * We hardcode all values for deterministic behavior. */

const u16 zobrist_pieces[2][7][128] = {
/* WHITE pieces */
{
 /* EMPTY - unused but keeps indexing simple */
 {0},
 /* PAWN */
 {0x9E37,0xA1C2,0x5D89,0x3F14,0xB6E0,0x72AB,0xD456,0x8F01, /* rank 1 file a-h */
  0x4BCC,0x0E97,0xC062,0x832D,0x45F8,0x17C3,0xDA8E,0x9C59, /* off-board */
  0x5E24,0x20EF,0xE3BA,0xA585,0x6750,0x291B,0xEBE6,0xADB1, /* rank 2 */
  0x6F7C,0x3147,0xF312,0xB4DD,0x76A8,0x3873,0xFA3E,0xBC09, /* off-board */
  0x7DD4,0x3F9F,0x016A,0xC335,0x8500,0x46CB,0x0896,0xCA61, /* rank 3 */
  0x8C2C,0x4DF7,0x0FC2,0xD18D,0x9358,0x5523,0x16EE,0xD8B9, /* off-board */
  0x9A84,0x5C4F,0x1E1A,0xDFE5,0xA1B0,0x637B,0x2546,0xE711, /* rank 4 */
  0xA8DC,0x6AA7,0x2C72,0xEE3D,0xB008,0x71D3,0x339E,0xF569, /* off-board */
  0xB734,0x78FF,0x3ACA,0xFC95,0xBE60,0x802B,0x41F6,0x03C1, /* rank 5 */
  0xC58C,0x8757,0x4922,0x0AED,0xCCB8,0x8E83,0x504E,0x1219, /* off-board */
  0xD3E4,0x95AF,0x577A,0x1945,0xDB10,0x9CDB,0x5EA6,0x2071, /* rank 6 */
  0xE23C,0xA407,0x65D2,0x279D,0xE968,0xAB33,0x6CFE,0x2EC9, /* off-board */
  0xF094,0xB25F,0x742A,0x35F5,0xF7C0,0xB98B,0x7B56,0x3D21, /* rank 7 */
  0xFEEC,0xC0B7,0x8282,0x444D,0x0618,0xC7E3,0x89AE,0x4B79, /* off-board */
  },
 /* KNIGHT */
 {0x0D44,0xCF0F,0x90DA,0x52A5,0x1470,0xD63B,0x9806,0x59D1,
  0x1B9C,0xDD67,0x9F32,0x60FD,0x22C8,0xE493,0xA65E,0x6829,
  0x29F4,0xEBBF,0xAD8A,0x6F55,0x3120,0xF2EB,0xB4B6,0x7681,
  0x384C,0xFA17,0xBBE2,0x7DAD,0x3F78,0x0143,0xC30E,0x84D9,
  0x46A4,0x086F,0xCA3A,0x8C05,0x4DD0,0x0F9B,0xD166,0x9331,
  0x54FC,0x16C7,0xD892,0x9A5D,0x5C28,0x1DF3,0xDFBE,0xA189,
  0x6354,0x251F,0xE6EA,0xA8B5,0x6A80,0x2C4B,0xEE16,0xAFE1,
  0x71AC,0x3377,0xF542,0xB70D,0x78D8,0x3AA3,0xFC6E,0xBE39,
  0x8004,0x41CF,0x039A,0xC565,0x8730,0x48FB,0x0AC6,0xCC91,
  0x8E5C,0x5027,0x11F2,0xD3BD,0x9588,0x5753,0x191E,0xDAE9,
  0x9CB4,0x5E7F,0x204A,0xE215,0xA3E0,0x65AB,0x2776,0xE941,
  0xAB0C,0x6CD7,0x2EA2,0xF06D,0xB238,0x7403,0x35CE,0xF799,
  0xB964,0x7B2F,0x3CFA,0xFEC5,0xC090,0x825B,0x4426,0x05F1,
  0xC7BC,0x8987,0x4B52,0x0D1D,0xCEE8,0x90B3,0x527E,0x1449,
  0xD614,0x97DF,0x59AA,0x1B75,0xDD40,0x9F0B,0x60D6,0x22A1,
  0xE46C,0xA637,0x6802,0x29CD,0xEB98,0xAD63,0x6F2E,0x30F9},
 /* BISHOP */
 {0x3274,0xF43F,0xB60A,0x77D5,0x39A0,0xFB6B,0xBD36,0x7F01,
  0x40CC,0x0297,0xC462,0x862D,0x47F8,0x09C3,0xCB8E,0x8D59,
  0x4F24,0x10EF,0xD2BA,0x9485,0x5650,0x181B,0xD9E6,0x9BB1,
  0x5D7C,0x1F47,0xE112,0xA2DD,0x64A8,0x2673,0xE83E,0xAA09,
  0x6BD4,0x2D9F,0xEF6A,0xB135,0x7300,0x34CB,0xF696,0xB861,
  0x7A2C,0x3BF7,0xFDC2,0xBF8D,0x8158,0x4323,0x04EE,0xC6B9,
  0x8884,0x4A4F,0x0C1A,0xCDE5,0x8FB0,0x517B,0x1346,0xD511,
  0x96DC,0x58A7,0x1A72,0xDC3D,0x9E08,0x5FD3,0x219E,0xE369,
  0xA534,0x66FF,0x28CA,0xEA95,0xAC60,0x6E2B,0x2FF6,0xF1C1,
  0xB38C,0x7557,0x3722,0xF8ED,0xBAB8,0x7C83,0x3E4E,0x0019,
  0xC1E4,0x83AF,0x457A,0x0745,0xC910,0x8ADB,0x4CA6,0x0E71,
  0xD03C,0x9207,0x53D2,0x159D,0xD768,0x9933,0x5AFE,0x1CC9,
  0xDE94,0xA05F,0x622A,0x23F5,0xE5C0,0xA78B,0x6956,0x2B21,
  0xECEC,0xAEB7,0x7082,0x324D,0xF418,0xB5E3,0x77AE,0x3979,
  0xFB44,0xBD0F,0x7EDA,0x40A5,0x0270,0xC43B,0x8606,0x47D1,
  0x099C,0xCB67,0x8D32,0x4EFD,0x10C8,0xD293,0x945E,0x5629},
 /* ROOK */
 {0x57F4,0x19BF,0xDB8A,0x9D55,0x5F20,0x20EB,0xE2B6,0xA481,
  0x664C,0x2817,0xE9E2,0xABAD,0x6D78,0x2F43,0xF10E,0xB2D9,
  0x74A4,0x366F,0xF83A,0xBA05,0x7BD0,0x3D9B,0xFF66,0xC131,
  0x82FC,0x44C7,0x0692,0xC85D,0x8A28,0x4BF3,0x0DBE,0xCF89,
  0x9154,0x531F,0x14EA,0xD6B5,0x9880,0x5A4B,0x1C16,0xDDE1,
  0x9FAC,0x6177,0x2342,0xE50D,0xA6D8,0x68A3,0x2A6E,0xEC39,
  0xAE04,0x6FCF,0x319A,0xF365,0xB530,0x76FB,0x38C6,0xFA91,
  0xBC5C,0x7E27,0x3FF2,0x01BD,0xC388,0x8553,0x471E,0x08E9,
  0xCAB4,0x8C7F,0x4E4A,0x1015,0xD1E0,0x93AB,0x5576,0x1741,
  0xD90C,0x9AD7,0x5CA2,0x1E6D,0xE038,0xA203,0x63CE,0x2599,
  0xE764,0xA92F,0x6AFA,0x2CC5,0xEE90,0xB05B,0x7226,0x33F1,
  0xF5BC,0xB787,0x7952,0x3B1D,0xFCE8,0xBEB3,0x807E,0x4249,
  0x0414,0xC5DF,0x87AA,0x4975,0x0B40,0xCD0B,0x8ED6,0x50A1,
  0x126C,0xD437,0x9602,0x57CD,0x1998,0xDB63,0x9D2E,0x5EF9,
  0x20C4,0xE28F,0xA45A,0x6625,0x27F0,0xE9BB,0xAB86,0x6D51,
  0x2F1C,0xF0E7,0xB2B2,0x747D,0x3648,0xF813,0xB9DE,0x7BA9},
 /* QUEEN */
 {0x7D34,0x3EFF,0x00CA,0xC295,0x8460,0x462B,0x07F6,0xC9C1,
  0x8B8C,0x4D57,0x0F22,0xD0ED,0x92B8,0x5483,0x164E,0xD819,
  0x99E4,0x5BAF,0x1D7A,0xDF45,0xA110,0x62DB,0x24A6,0xE671,
  0xA83C,0x6A07,0x2BD2,0xED9D,0xAF68,0x7133,0x32FE,0xF4C9,
  0xB694,0x785F,0x3A2A,0xFBF5,0xBDC0,0x7F8B,0x4156,0x0321,
  0xC4EC,0x86B7,0x4882,0x0A4D,0xCC18,0x8DE3,0x4FAE,0x1179,
  0xD344,0x950F,0x56DA,0x18A5,0xDA70,0x9C3B,0x5E06,0x1FD1,
  0xE19C,0xA367,0x6532,0x26FD,0xE8C8,0xAA93,0x6C5E,0x2E29,
  0xEFF4,0xB1BF,0x738A,0x3555,0xF720,0xB8EB,0x7AB6,0x3C81,
  0xFE4C,0xC017,0x81E2,0x43AD,0x0578,0xC743,0x890E,0x4AD9,
  0x0CA4,0xCE6F,0x903A,0x5205,0x13D0,0xD59B,0x9766,0x5931,
  0x1AFC,0xDCC7,0x9E92,0x605D,0x2228,0xE3F3,0xA5BE,0x6789,
  0x2954,0xEB1F,0xACEA,0x6EB5,0x3080,0xF24B,0xB416,0x75E1,
  0x37AC,0xF977,0xBB42,0x7D0D,0x3ED8,0x00A3,0xC26E,0x8439,
  0x4604,0x07CF,0xC99A,0x8B65,0x4D30,0x0EFB,0xD0C6,0x9291,
  0x545C,0x1627,0xD7F2,0x99BD,0x5B88,0x1D53,0xDF1E,0xA0E9},
 /* KING */
 {0xA2B4,0x647F,0x264A,0xE815,0xA9E0,0x6BAB,0x2D76,0xEF41,
  0xB10C,0x72D7,0x34A2,0xF66D,0xB838,0x7A03,0x3BCE,0xFD99,
  0xBF64,0x812F,0x42FA,0x04C5,0xC690,0x885B,0x4A26,0x0BF1,
  0xCDBC,0x8F87,0x5152,0x131D,0xD4E8,0x96B3,0x587E,0x1A49,
  0xDC14,0x9DDF,0x5FAA,0x2175,0xE340,0xA50B,0x66D6,0x28A1,
  0xEA6C,0xAC37,0x6E02,0x2FCD,0xF198,0xB363,0x752E,0x36F9,
  0xF8C4,0xBA8F,0x7C5A,0x3E25,0xFFF0,0xC1BB,0x8386,0x4551,
  0x071C,0xC8E7,0x8AB2,0x4C7D,0x0E48,0xD013,0x91DE,0x53A9,
  0x1574,0xD73F,0x990A,0x5AD5,0x1CA0,0xDE6B,0xA036,0x6201,
  0x23CC,0xE597,0xA762,0x692D,0x2AF8,0xECC3,0xAE8E,0x7059,
  0x3224,0xF3EF,0xB5BA,0x7785,0x3950,0xFB1B,0xBCE6,0x7EB1,
  0x407C,0x0247,0xC412,0x85DD,0x47A8,0x0973,0xCB3E,0x8D09,
  0x4ED4,0x109F,0xD26A,0x9435,0x5600,0x17CB,0xD996,0x9B61,
  0x5D2C,0x1EF7,0xE0C2,0xA28D,0x6458,0x2623,0xE7EE,0xA9B9,
  0x6B84,0x2D4F,0xEF1A,0xB0E5,0x72B0,0x347B,0xF646,0xB811,
  0x79DC,0x3BA7,0xFD72,0xBF3D,0x8108,0x42D3,0x049E,0xC669}
},
/* BLACK pieces */
{
 /* EMPTY */
 {0},
 /* PAWN */
 {0xC844,0x8A0F,0x4BDA,0x0DA5,0xCF70,0x913B,0x5306,0x14D1,
  0xD69C,0x9867,0x5A32,0x1BFD,0xDDC8,0x9F93,0x615E,0x2329,
  0xE4F4,0xA6BF,0x688A,0x2A55,0xEC20,0xADEB,0x6FB6,0x3181,
  0xF34C,0xB517,0x76E2,0x38AD,0xFA78,0xBC43,0x7E0E,0x3FD9,
  0x01A4,0xC36F,0x853A,0x4705,0x08D0,0xCA9B,0x8C66,0x4E31,
  0x0FFC,0xD1C7,0x9392,0x555D,0x1728,0xD8F3,0x9ABE,0x5C89,
  0x1E54,0xE01F,0xA1EA,0x63B5,0x2580,0xE74B,0xA916,0x6AE1,
  0x2CAC,0xEE77,0xB042,0x720D,0x33D8,0xF5A3,0xB76E,0x7939,
  0x3B04,0xFCCF,0xBE9A,0x8065,0x4230,0x03FB,0xC5C6,0x8791,
  0x495C,0x0B27,0xCCF2,0x8EBD,0x5088,0x1253,0xD41E,0x95E9,
  0x57B4,0x197F,0xDB4A,0x9D15,0x5EE0,0x20AB,0xE276,0xA441,
  0x660C,0x27D7,0xE9A2,0xAB6D,0x6D38,0x2F03,0xF0CE,0xB299,
  0x7464,0x362F,0xF7FA,0xB9C5,0x7B90,0x3D5B,0xFF26,0xC0F1,
  0x82BC,0x4487,0x0652,0xC81D,0x89E8,0x4BB3,0x0D7E,0xCF49,
  0x9114,0x52DF,0x14AA,0xD675,0x9840,0x5A0B,0x1BD6,0xDDA1,
  0x9F6C,0x6137,0x2302,0xE4CD,0xA698,0x6863,0x2A2E,0xEBF9},
 /* KNIGHT */
 {0xAD84,0x6F4F,0x311A,0xF2E5,0xB4B0,0x767B,0x3846,0xFA11,
  0xBBDC,0x7DA7,0x3F72,0x013D,0xC308,0x84D3,0x469E,0x0869,
  0xCA34,0x8BFF,0x4DCA,0x0F95,0xD160,0x932B,0x54F6,0x16C1,
  0xD88C,0x9A57,0x5C22,0x1DED,0xDFB8,0xA183,0x634E,0x2519,
  0xE6E4,0xA8AF,0x6A7A,0x2C45,0xEE10,0xAFDB,0x71A6,0x3371,
  0xF53C,0xB707,0x78D2,0x3A9D,0xFC68,0xBE33,0x7FFE,0x41C9,
  0x0394,0xC55F,0x872A,0x48F5,0x0AC0,0xCC8B,0x8E56,0x5021,
  0x11EC,0xD3B7,0x9582,0x574D,0x1918,0xDAE3,0x9CAE,0x5E79,
  0x2044,0xE20F,0xA3DA,0x65A5,0x2770,0xE93B,0xAB06,0x6CD1,
  0x2E9C,0xF067,0xB232,0x73FD,0x35C8,0xF793,0xB95E,0x7B29,
  0x3CF4,0xFEBF,0xC08A,0x8255,0x4420,0x05EB,0xC7B6,0x8981,
  0x4B4C,0x0D17,0xCEE2,0x90AD,0x5278,0x1443,0xD60E,0x97D9,
  0x59A4,0x1B6F,0xDD3A,0x9F05,0x60D0,0x229B,0xE466,0xA631,
  0x67FC,0x29C7,0xEB92,0xAD5D,0x6F28,0x30F3,0xF2BE,0xB489,
  0x7654,0x381F,0xF9EA,0xBBB5,0x7D80,0x3F4B,0x0116,0xC2E1,
  0x84AC,0x4677,0x0842,0xCA0D,0x8BD8,0x4DA3,0x0F6E,0xD139},
 /* BISHOP */
 {0xD304,0x94CF,0x569A,0x1865,0xDA30,0x9BFB,0x5DC6,0x1F91,
  0xE15C,0xA327,0x64F2,0x26BD,0xE888,0xAA53,0x6C1E,0x2DE9,
  0xEFB4,0xB17F,0x734A,0x3515,0xF6E0,0xB8AB,0x7A76,0x3C41,
  0xFE0C,0xBFD7,0x81A2,0x436D,0x0538,0xC703,0x88CE,0x4A99,
  0x0C64,0xCE2F,0x8FFA,0x51C5,0x1390,0xD55B,0x9726,0x58F1,
  0x1ABC,0xDC87,0x9E52,0x601D,0x21E8,0xE3B3,0xA57E,0x6749,
  0x2914,0xEADF,0xACAA,0x6E75,0x3040,0xF20B,0xB3D6,0x75A1,
  0x376C,0xF937,0xBB02,0x7CCD,0x3E98,0x0063,0xC22E,0x83F9,
  0x45C4,0x078F,0xC95A,0x8B25,0x4CF0,0x0EBB,0xD086,0x9251,
  0x541C,0x15E7,0xD7B2,0x997D,0x5B48,0x1D13,0xDEDE,0xA0A9,
  0x6274,0x243F,0xE60A,0xA7D5,0x69A0,0x2B6B,0xED36,0xAF01,
  0x70CC,0x3297,0xF462,0xB62D,0x77F8,0x39C3,0xFB8E,0xBD59,
  0x7F24,0x40EF,0x02BA,0xC485,0x8650,0x481B,0x09E6,0xCBB1,
  0x8D7C,0x4F47,0x1112,0xD2DD,0x94A8,0x5673,0x183E,0xDA09,
  0x9BD4,0x5D9F,0x1F6A,0xE135,0xA300,0x64CB,0x2696,0xE861,
  0xAA2C,0x6BF7,0x2DC2,0xEF8D,0xB158,0x7323,0x34EE,0xF6B9},
 /* ROOK */
 {0xF854,0xBA1F,0x7BEA,0x3DB5,0xFF80,0xC14B,0x8316,0x44E1,
  0x06AC,0xC877,0x8A42,0x4C0D,0x0DD8,0xCFA3,0x916E,0x5339,
  0x1504,0xD6CF,0x989A,0x5A65,0x1C30,0xDDFB,0x9FC6,0x6191,
  0x235C,0xE527,0xA6F2,0x68BD,0x2A88,0xEC53,0xAE1E,0x6FE9,
  0x31B4,0xF37F,0xB54A,0x7715,0x38E0,0xFAAB,0xBC76,0x7E41,
  0x400C,0x01D7,0xC3A2,0x856D,0x4738,0x0903,0xCACE,0x8C99,
  0x4E64,0x102F,0xD1FA,0x93C5,0x5590,0x175B,0xD926,0x9AF1,
  0x5CBC,0x1E87,0xE052,0xA21D,0x63E8,0x25B3,0xE77E,0xA949,
  0x6B14,0x2CDF,0xEEAA,0xB075,0x7240,0x340B,0xF5D6,0xB7A1,
  0x796C,0x3B37,0xFD02,0xBECD,0x8098,0x4263,0x042E,0xC5F9,
  0x87C4,0x498F,0x0B5A,0xCD25,0x8EF0,0x50BB,0x1286,0xD451,
  0x961C,0x57E7,0x19B2,0xDB7D,0x9D48,0x5F13,0x20DE,0xE2A9,
  0xA474,0x663F,0x280A,0xE9D5,0xABA0,0x6D6B,0x2F36,0xF101,
  0xB2CC,0x7497,0x3662,0xF82D,0xB9F8,0x7BC3,0x3D8E,0xFF59,
  0xC124,0x82EF,0x44BA,0x0685,0xC850,0x8A1B,0x4BE6,0x0DB1,
  0xCF7C,0x9147,0x5312,0x14DD,0xD6A8,0x9873,0x5A3E,0x1C09},
 /* QUEEN */
 {0x1DD4,0xDF9F,0xA16A,0x6335,0x2500,0xE6CB,0xA896,0x6A61,
  0x2C2C,0xEDF7,0xAFC2,0x718D,0x3358,0xF523,0xB6EE,0x78B9,
  0x3A84,0xFC4F,0xBE1A,0x7FE5,0x41B0,0x037B,0xC546,0x8711,
  0x48DC,0x0AA7,0xCC72,0x8E3D,0x5008,0x11D3,0xD39E,0x9569,
  0x5734,0x18FF,0xDACA,0x9C95,0x5E60,0x202B,0xE1F6,0xA3C1,
  0x658C,0x2757,0xE922,0xAAED,0x6CB8,0x2E83,0xF04E,0xB219,
  0x73E4,0x35AF,0xF77A,0xB945,0x7B10,0x3CDB,0xFEA6,0xC071,
  0x823C,0x4407,0x05D2,0xC79D,0x8968,0x4B33,0x0CFE,0xCEC9,
  0x9094,0x525F,0x142A,0xD5F5,0x97C0,0x598B,0x1B56,0xDD21,
  0x9EEC,0x60B7,0x2282,0xE44D,0xA618,0x67E3,0x29AE,0xEB79,
  0xAD44,0x6F0F,0x30DA,0xF2A5,0xB470,0x763B,0x3806,0xF9D1,
  0xBB9C,0x7D67,0x3F32,0x00FD,0xC2C8,0x8493,0x465E,0x0829,
  0xC9F4,0x8BBF,0x4D8A,0x0F55,0xD120,0x92EB,0x54B6,0x1681,
  0xD84C,0x9A17,0x5BE2,0x1DAD,0xDF78,0xA143,0x630E,0x24D9,
  0xE6A4,0xA86F,0x6A3A,0x2C05,0xEDD0,0xAF9B,0x7166,0x3331,
  0xF4FC,0xB6C7,0x7892,0x3A5D,0xFC28,0xBDF3,0x7FBE,0x4189},
 /* KING */
 {0x4354,0x051F,0xC6EA,0x88B5,0x4A80,0x0C4B,0xCE16,0x8FE1,
  0x51AC,0x1377,0xD542,0x970D,0x58D8,0x1AA3,0xDC6E,0x9E39,
  0x6004,0x21CF,0xE39A,0xA565,0x6730,0x28FB,0xEAC6,0xAC91,
  0x6E5C,0x3027,0xF1F2,0xB3BD,0x7588,0x3753,0xF91E,0xBAE9,
  0x7CB4,0x3E7F,0x004A,0xC215,0x83E0,0x45AB,0x0776,0xC941,
  0x8B0C,0x4CD7,0x0EA2,0xD06D,0x9238,0x5403,0x15CE,0xD799,
  0x9964,0x5B2F,0x1CFA,0xDEC5,0xA090,0x625B,0x2426,0xE5F1,
  0xA7BC,0x6987,0x2B52,0xED1D,0xAEE8,0x70B3,0x327E,0xF449,
  0xB614,0x77DF,0x39AA,0xFB75,0xBD40,0x7F0B,0x40D6,0x02A1,
  0xC46C,0x8637,0x4802,0x09CD,0xCB98,0x8D63,0x4F2E,0x10F9,
  0xD2C4,0x948F,0x565A,0x1825,0xD9F0,0x9BBB,0x5D86,0x1F51,
  0xE11C,0xA2E7,0x64B2,0x267D,0xE848,0xAA13,0x6BDE,0x2DA9,
  0xEF74,0xB13F,0x730A,0x34D5,0xF6A0,0xB86B,0x7A36,0x3C01,
  0xFDCC,0xBF97,0x8162,0x432D,0x04F8,0xC6C3,0x888E,0x4A59,
  0x0C24,0xCDEF,0x8FBA,0x5185,0x1350,0xD51B,0x96E6,0x58B1,
  0x1A7C,0xDC47,0x9E12,0x5FDD,0x21A8,0xE373,0xA53E,0x6709}
}
};

const u16 zobrist_side = 0xB3D7;

const u16 zobrist_castle[16] = {
    0x0000, 0x1A2B, 0x3C4D, 0x5E6F,
    0x7891, 0x9AB3, 0xBCD5, 0xDEF7,
    0x0119, 0x233B, 0x455D, 0x677F,
    0x89A1, 0xABC3, 0xCDE5, 0xEF07
};

const u16 zobrist_ep[8] = {
    0xF120, 0xD342, 0xB564, 0x9786,
    0x79A8, 0x5BCA, 0x3DEC, 0x1F0E
};

/* MVV-LVA: [victim][attacker] -> score offset
 * Higher value victims and lower value attackers get higher scores.
 * Added to base score of 200 for capture ordering. */
const u8 mvv_lva[7][7] = {
    /*           empty  pawn  knight bishop rook  queen  king */
    /* empty */  { 0,    0,    0,     0,    0,     0,    0 },
    /* pawn  */  { 0,   15,   14,    14,   13,    12,   11 },
    /* knight*/  { 0,   25,   24,    24,   23,    22,   21 },
    /* bishop*/  { 0,   25,   24,    24,   23,    22,   21 },
    /* rook  */  { 0,   35,   34,    34,   33,    32,   31 },
    /* queen */  { 0,   45,   44,    44,   43,    42,   41 },
    /* king  */  { 0,    0,    0,     0,    0,     0,    0 }
};

/* Knight move offsets (8 directions on 0x88 board) */
const s8 knight_offsets[8] = {
    -33, -31, -18, -14, 14, 18, 31, 33
};

/* Bishop move direction offsets */
const s8 bishop_offsets[4] = { -17, -15, 15, 17 };

/* Rook move direction offsets */
const s8 rook_offsets[4] = { -16, -1, 1, 16 };

/* Castling rights mask: AND with castle_rights when piece moves from/to square.
 * Most squares are 0xFF (no change). Rook/king squares clear relevant bits. */
const u8 castle_mask[128] = {
    /* Rank 1: a1      b1    c1    d1    e1    f1    g1    h1 */
    (u8)~CASTLE_WQ, 0xFF, 0xFF, 0xFF, (u8)~(CASTLE_WK|CASTLE_WQ), 0xFF, 0xFF, (u8)~CASTLE_WK,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, /* off-board */
    /* Rank 2-7: all 0xFF */
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF, 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
    /* Rank 8: a8      b8    c8    d8    e8    f8    g8    h8 */
    (u8)~CASTLE_BQ, 0xFF, 0xFF, 0xFF, (u8)~(CASTLE_BK|CASTLE_BQ), 0xFF, 0xFF, (u8)~CASTLE_BK,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF  /* off-board */
};

void tables_init(void) {
    /* All tables are const/hardcoded - nothing to initialize at runtime */
}
